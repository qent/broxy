"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[68],{8386(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"configuration","title":"Configuration","description":"Broxy reads configuration from a directory containing mcp.json and one or more preset_.json files.","source":"@site/broxy-docs/configuration.md","sourceDirName":".","slug":"/configuration","permalink":"/docs/configuration","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Configuration"},"sidebar":"mainSidebar","previous":{"title":"Quickstart","permalink":"/docs/quickstart"},"next":{"title":"Presets and filtering","permalink":"/docs/presets"}}');var i=s(4848),o=s(8453);const t={title:"Configuration"},d=void 0,l={},c=[{value:"mcp.json",id:"mcpjson",level:2},{value:"Supported keys",id:"supported-keys",level:3},{value:"Transport definitions",id:"transport-definitions",level:3},{value:"Environment placeholders",id:"environment-placeholders",level:3},{value:"Preset files",id:"preset-files",level:2}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Broxy reads configuration from a directory containing ",(0,i.jsx)(n.code,{children:"mcp.json"})," and one or more ",(0,i.jsx)(n.code,{children:"preset_<id>.json"})," files.\nChanges are hot reloaded by the configuration watcher."]}),"\n",(0,i.jsx)(n.h2,{id:"mcpjson",children:"mcp.json"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"mcp.json"})," file defines downstream servers and global timeouts."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "requestTimeoutSeconds": 60,\n  "capabilitiesTimeoutSeconds": 30,\n  "capabilitiesRefreshIntervalSeconds": 300,\n  "defaultPresetId": "developer",\n  "inboundSsePort": 3335,\n  "showTrayIcon": true,\n  "mcpServers": {\n    "search": {\n      "name": "Search MCP",\n      "transport": "streamable-http",\n      "url": "https://mcp.example.com/stream",\n      "headers": {\n        "Authorization": "Bearer ${SEARCH_TOKEN}"\n      }\n    },\n    "files": {\n      "name": "File MCP",\n      "transport": "stdio",\n      "command": "node",\n      "args": ["/absolute/path/to/mcp-files-server.js"]\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"supported-keys",children:"Supported keys"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"mcpServers"}),": Map of server IDs to downstream server definitions."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"requestTimeoutSeconds"}),": Timeout for MCP calls."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"capabilitiesTimeoutSeconds"}),": Timeout for tools/prompts/resources listing."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"capabilitiesRefreshIntervalSeconds"}),": Background refresh interval for cached capabilities."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"defaultPresetId"}),": Used by UI/stdio mode when no preset is provided."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inboundSsePort"}),": Port for the local streamable HTTP inbound server (UI usage)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"showTrayIcon"}),": Toggle the desktop tray icon."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"transport-definitions",children:"Transport definitions"}),"\n",(0,i.jsx)(n.p,{children:"Each server entry declares a transport and the fields it needs:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"stdio"}),": requires ",(0,i.jsx)(n.code,{children:"command"})," and optional ",(0,i.jsx)(n.code,{children:"args"})," and ",(0,i.jsx)(n.code,{children:"env"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"http"})," or ",(0,i.jsx)(n.code,{children:"streamable-http"}),": requires ",(0,i.jsx)(n.code,{children:"url"})," and optional ",(0,i.jsx)(n.code,{children:"headers"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"websocket"}),"/",(0,i.jsx)(n.code,{children:"ws"}),": requires ",(0,i.jsx)(n.code,{children:"url"})," and optional ",(0,i.jsx)(n.code,{children:"headers"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"environment-placeholders",children:"Environment placeholders"}),"\n",(0,i.jsxs)(n.p,{children:["Broxy resolves ",(0,i.jsx)(n.code,{children:"${ENV}"})," and ",(0,i.jsx)(n.code,{children:"{ENV}"})," placeholders in string values using the current environment. Missing\nvariables fail the configuration load."]}),"\n",(0,i.jsx)(n.h2,{id:"preset-files",children:"Preset files"}),"\n",(0,i.jsxs)(n.p,{children:["Presets live in ",(0,i.jsx)(n.code,{children:"preset_<id>.json"})," files and define allow lists for tools, prompts, and resources."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "id": "developer",\n  "name": "Developer",\n  "tools": [\n    {"serverId": "files", "toolName": "readFile", "enabled": true},\n    {"serverId": "files", "toolName": "writeFile", "enabled": true}\n  ],\n  "prompts": [\n    {"serverId": "search", "promptName": "research", "enabled": true}\n  ],\n  "resources": [\n    {"serverId": "files", "resourceKey": "workspace", "enabled": true}\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Disabled entries can remain listed with ",(0,i.jsx)(n.code,{children:"enabled: false"}),". Missing tools are logged as warnings and ignored."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);